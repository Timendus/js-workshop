(()=>{"use strict";class e{constructor(){this.options=[{name:"Rock",icon:"fa-hand-rock",beats:"Scissors"},{name:"Paper",icon:"fa-hand-paper",beats:"Rock"},{name:"Scissors",icon:"fa-hand-scissors",beats:"Paper"}],this._choices={},this._scores={},this._events={},this.resetScores()}addEventListener(e,s){this._events[e]??=[],this._events[e].push(s)}start(){this._makeRandomChoice()}_makeRandomChoice(){window.setTimeout((()=>{const e=this.options[Math.floor(Math.random()*this.options.length)];this._choices.opponent=e,this._fireEvent("opponentChose"),this._checkChoices()}),Math.floor(7e3*Math.random()))}resetScores(){this._scores={me:0,opponent:0},this._fireEvent("scoresChanged",{...this._scores})}choose(e){this._choices.me=e,this._checkChoices()}_fireEvent(e,s){const t=this._events[e];t&&t.forEach((e=>e(s)))}_checkChoices(){this._choices.me&&this._choices.opponent&&(this._choices.me.beats==this._choices.opponent.name?(this._lastResult="WIN",this._scores.me++):this._choices.opponent.beats==this._choices.me.name?(this._lastResult="LOSE",this._scores.opponent++):this._lastResult="TIE",this._fireEvent("scoresChanged",{...this._scores}),this._fireEvent("gameEnd",{choices:{...this._choices},result:this._lastResult}),this._choices={},this._makeRandomChoice())}}document.addEventListener("DOMContentLoaded",(()=>{const s=document.querySelector("section"),t=document.querySelector("#user_choice"),n=document.querySelector("#comp_choice"),o=document.querySelector("#result"),i=document.querySelector("#waiting-message"),c=new e;c.addEventListener("opponentChose",(()=>{i.innerText="Opponent is waiting for you..."})),c.addEventListener("scoresChanged",(e=>{document.getElementById("opponent_score").innerHTML=e.opponent,document.getElementById("user_score").innerHTML=e.me})),c.addEventListener("gameEnd",(e=>{switch(e.result){case"WIN":o.innerHTML="You Win!",o.classList.add("win"),document.body.style.background="linear-gradient(135deg, #1ba0ff, #1bffb5)";break;case"LOSE":o.innerHTML="Opponent Wins!",o.classList.add("lose"),document.body.style.background="linear-gradient(135deg, #ff1b99, #ffa41b)";break;case"TIE":o.innerHTML="You tied!",o.classList.add("tie"),document.body.style.background="linear-gradient(135deg, #ffcf1b, #ff8b1b)"}i.innerText="Make a choice!",n.innerHTML=`Opponent chose <span>${e.choices.opponent.name.toUpperCase()}</span>`})),s.addEventListener("click",(e=>{const s=c.options.find((s=>s.name==e.target.id));s&&(i.innerText="Waiting for your opponent...",t.innerHTML=`You choose <span>${s.name.toUpperCase()}</span>`,n.innerHTML="",o.innerHTML="",o.classList=[],c.choose(s))})),c.options.forEach((e=>{const t=document.createElement("button");t.id=e.name,t.classList.add("far"),t.classList.add(e.icon),s.appendChild(t)})),c.start()}))})();